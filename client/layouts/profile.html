<template name="profile">
  <style media="screen">
    .online{
      color : #8BC34A
    }
    .offline{
      color : grey
    }
    span.ligth{
      color : grey;
    }
    div.card-content h3{
      margin-top: -1rem;
    }
    div.card-content{
      padding: 25px!important;
    }
    div.contact{
      margin-bottom: -0.5rem!important;
    }
    img.craft-user{
      height: 5rem;
      width: 6.1rem!important;
    }
    div.user-profile{
      margin-bottom: 0rem!important;
    }
    i.online{
      background-color: none!important;
      color: #9ccc65
    }
    h4.promo{
      position: relative;
      top: -10rem;
      left: -5.6rem;
      width: 5rem;
    }
    span.small{
      font-size: 10px;
      margin-left: 0.1rem;
      width: 7rem;
      margin-top: -0.6rem;
    }
    div.promo{
      position: relative;
      top: -10rem;
      right: 5rem;
    }
    div.on-sale{
      position: relative;
      top: -0.2rem;
      left: 22vw;
      width: 0;
      height: 0;
      border-top: 10rem solid #cddc39 ;
      border-left: 10rem solid transparent;
    }
    a.post{
      color: inherit;
    }
  </style>
  <div class="row container">
      {{#if userProfile.profile.craft.name}}
        <div class="col m6 grey lighten-1">
          <h4>Productos/Servicios</h4>
          <div class="col m12 row">
            {{#each posts}}
              <a class="post" href="/post/{{_id}}">
                <div class="card col m12 craft-card">
                  <div class="card-image" style="background-image : url('{{photos.[0]}}')">
                    {{#if checkOnSale onSale 2}}
                      <div class="on-sale row">
                        <h4 class="promo">{{saleGet}} * {{salePay}}</h4>
                      </div>
                    {{/if}}
                    {{#if checkOnSale onSale 1}}
                      <div class="on-sale row">
                        <div class="row promo">
                          <h5 class="col 9 promo">{{percentage}}%</h5>
                          <span class="col 12 small">en compras mayaores a ${{minValue}}</span>
                        </div>
                      </div>
                    {{/if}}
                  </div>
                  <div class="card-content row">
                    <div class="col m12 row main-info">
                      <h4 class="col m6">{{name}}</h4>
                      <h5 class="col m3 offset-m3">${{price}}</h5>
                    </div>
                    <div class="col m12 row">
                      {{#each labels}}
                       <div class="chip col">
                          {{this}}
                        </div>
                      {{/each}}
                    </div>
                    <span class="ligth col m12">{{description}}</span>
                    {{#if negotiable}}
                      <span class="col m12"><i class="material-icons left">swap_vert</i>Negociable</span>
                    {{/if}}
                    {{#if shipping}}
                      {{#if shippingIncluded}}
                        <span class="col m12"><i class="mdi mdi-truck-delivery left small"></i>Envio incluido</span>
                      {{else}}
                        <span class="col m12"><i class="mdi mdi-truck-delivery left small"></i>Precio del envio ${{shippingCost}}</span>
                      {{/if}}
                    {{else}}
                      <span class="col"><i class="material-icons left">not_interested</i>No se realizan envios</span>
                    {{/if}}
                  </div>
                </div>
              </a>

            {{/each}}
          </div>
        </div>
        <div class="col m6">
          {{> craftProfile}}
          {{> userProfile}}
        </div>
      {{else}}
        <div class="col m6  offset-m3">
          {{> userProfile}}
        </div>
      {{/if}}
  </div>
</template>

<template name="craftProfile">
  <div class="card white darken-1 col s12 craft-card">
    <div class="card-image" style="background-image : url('{{userProfile.profile.craft.photo}}')"></div>
    <div class="card-content">
      <h3>{{userProfile.profile.craft.name}}</h3>
      <h5>{{userProfile.profile.craft.city}}</h5>
      <h6>{{userProfile.profile.craft.address}}</h6>
      <span class="ligth">{{userProfile.profile.craft.description}}</span>
    </div>
  </div>
  <div class="card white col s12">
    <div class="card-content contact row">
      <div class="m12">
        <i class="material-icons">call</i>
        <span class="">{{userProfile.profile.craft.movil}}</span>
      </div>
      {{#if userProfile.profile.craft.telephone}}
        <div class="m12">
          <i class="material-icons">stay_current_portrait</i>
          <span class="">{{userProfile.profile.craft.telephone}}</span>
        </div>
      {{/if}}
      <div class="m12">
        <i class="material-icons">language</i>
        <span class="">{{userProfile.profile.craft.webPage}}</span>
      </div>
    </div>
  </div>
</template>
<template name="userProfile">
  <div class="card white darken-1 col s12">
    <div class="card-content white small row user-profile">
      <div class="col m9 s12" >
        <div class="row">
          <span class="col card-title">{{userProfile.profile.name}}{{userProfile.profile.lastName}}</span>
          {{#if userProfile.status.online}}
            <i class="mdi mdi-octagon online"></i>
          {{else}}
            <i class="mdi mdi-octagon-outline"></i>
          {{/if}}
        </div>
        <span class="col m12">{{userProfileEmail}}</span>
        <span class="col m12 ligth">{{userProfile.profile.telephone}}</span>
      </div>
      <img src="{{userProfile.profile.photo}}" class="circle  col m3 craft-user">
    </div>
    <div class="card-action">
      <a href="/messages/{{userProfile._id}}" class="btn-flat">Enviar Mensaje</a>
    </div>
  </div>
</template>
